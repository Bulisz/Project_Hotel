<div class="container-sm outer">
  <div class="container-sm shadow inner">

    <div class="modal-header">
      <h3 class="text-center title">Profil módosítása</h3>
      <button class="btn-close" type="button" (click)="closeUserModify()"></button>
    </div>

    <form [formGroup]="userModifyForm" (ngSubmit)="onSubmit()">

      <div class="mb-3">
        <label for="userName" class="form-label">Felhasználónév:</label>
        <input type="text" class="form-control" id="userName" formControlName="userName"
        [ngClass]="{'is-invalid': userModifyForm.get('userName')?.invalid && userModifyForm.get('userName')?.touched} || userModifyForm.get('userName')?.errors?.['serverError']">

            <small *ngIf="userModifyForm.get('userName')?.dirty
              && !userModifyForm.get('userName')?.errors?.['serverError']
              && userModifyForm.get('userName')?.errors?.['pattern']" class="text-danger">
              2 és 30 ékezet nélküli betűből és számból állhat
            </small>

            <small
              *ngIf="userModifyForm.get('userName')?.invalid 
              && userModifyForm.get('userName')?.touched 
              && !userModifyForm.get('userName')?.errors?.['pattern'] 
              && !userModifyForm.get('userName')?.errors?.['serverError']"
              class="text-danger">
              Adja meg a felhasználónevét
            </small>
        

            <!-- ServerError BE-ről -->
            <small *ngIf="userModifyForm.get('userName')?.errors?.['serverError']" class="text-danger">
              {{userModifyForm.get('userName')?.getError('serverError')}}
            </small>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email" formControlName="email"
        [ngClass]="{'is-invalid': userModifyForm.get('email')?.invalid && userModifyForm.get('email')?.touched} || userModifyForm.get('email')?.errors?.['serverError']">

        <small *ngIf="userModifyForm.get('email')?.invalid && userModifyForm.get('email')?.dirty
            && !userModifyForm.get('email')?.errors?.['serverError']
            && userModifyForm.get('email')?.errors?.['pattern']" class="text-danger">
            Valós email-címet adjon meg
        </small>

        <small
            *ngIf="userModifyForm.get('email')?.invalid 
            && userModifyForm.get('email')?.touched 
            && !userModifyForm.get('email')?.errors?.['pattern']
            && !userModifyForm.get('email')?.errors?.['serverError']"
            class="text-danger">
            Adja meg az email-címét
        </small>

            <!-- ServerError BE-ről -->
            <small *ngIf="userModifyForm.get('email')?.errors?.['serverError']" class="text-danger">
              {{userModifyForm.get('email')?.getError('serverError')}}
            </small>
      </div>

      <div class="mb-3">
        <label for="firstName" class="form-label">Keresztnév:</label>
        <input type="text" class="form-control" id="firstName" formControlName="firstName"
        [ngClass]="{'is-invalid': userModifyForm.get('firstName')?.invalid && userModifyForm.get('firstName')?.touched} || userModifyForm.get('firstName')?.errors?.['serverError']">

            <small
                  *ngIf="userModifyForm.get('firstName')?.invalid 
                  && userModifyForm.get('firstName')?.touched
                  && !userModifyForm.get('firstName')?.errors?.['pattern']
                  && !userModifyForm.get('firstName')?.errors?.['serverError']"
                  class="text-danger">
                  Adja meg a keresznevét
            </small>

            <small *ngIf="userModifyForm.get('firstName')?.invalid && userModifyForm.get('firstName')?.dirty
                                && !userModifyForm.get('firstName')?.errors?.['serverError']
                                && userModifyForm.get('firstName')?.errors?.['pattern']" class="text-danger">
              2 és 50 betűből álló tulajdonnév
            </small>

            <!-- ServerError BE-ről -->
            <small *ngIf="userModifyForm.get('firstName')?.errors?.['serverError']" class="text-danger">
              {{userModifyForm.get('firstName')?.getError('serverError')}}
            </small>
      </div>

      <div class="mb-3">
        <label for="lastName" class="form-label">Vezetéknév:</label>
        <input type="text" class="form-control" id="lastName" formControlName="lastName"
        [ngClass]="{'is-invalid': userModifyForm.get('lastName')?.invalid && userModifyForm.get('lastName')?.touched} || userModifyForm.get('lastName')?.errors?.['serverError']">

        <small
              *ngIf="userModifyForm.get('lastName')?.invalid
              && userModifyForm.get('lastName')?.touched
              && !userModifyForm.get('lastName')?.errors?.['pattern']
              && !userModifyForm.get('lastName')?.errors?.['serverError']"
              class="text-danger">
              Adja meg a vezetéknevét
        </small>

        <small *ngIf="userModifyForm.get('lastName')?.invalid && userModifyForm.get('lastName')?.dirty
                && !userModifyForm.get('lastName')?.errors?.['serverError']
                && userModifyForm.get('lastName')?.errors?.['pattern']" class="text-danger">
                2 és 50 betűből álló tulajdonnév
        </small>

            <!-- ServerError BE-ről -->
            <small *ngIf="userModifyForm.get('lastName')?.errors?.['serverError']" class="text-danger">
              {{userModifyForm.get('lastName')?.getError('serverError')}}
            </small>
      </div>

      <div class="text-center">
        <button type="submit" class="btn" [disabled]="!userModifyForm.valid">Elküld</button>
      </div>

    </form>

  </div>
</div>
